<!DOCTYPE html>
<html lang="en">

<%- include('../Partes/head')  %>


<body data-theme="default" data-layout="fluid" data-sidebar-position="left" data-sidebar-behavior="sticky">
	<div class="wrapper">
		<%- include('../Partes/sidebar')  %>
		<div class="main">
			<%- include('../Partes/nav')  %> 

			<main class="content">
				<div class="container-fluid p-0">

					<button type="button" class="btn btn-primary my-1" data-bs-toggle="modal"
					data-bs-target="#sizedModalLg">
					Nova Categoria
				</button>
				

					
					<div class="row">
						<div class="col-12">
							<div class="card">
								<div class="card-header">
									<h5 class="card-title">Table with Buttons</h5>
									
										</div>
								<div class="card-body">
									<table id="datatables-buttons" class="table table-striped" style="width:100%">
										<thead>
											<tr>
												<th>#</th>
												<th>Nome</th>
												<th>Detalhes</th>
												<th>Data Criação</th>
												<th>Acção</th>
											</tr>
										</thead>
										<tbody>
										
											<% categorias.reverse().map(categoria=>{ %>
                                                <tr>
                                                    <td>
                                                        <%= categoria.idCategoria %>
                                                    </td>
													<td>
                                                        <%= categoria.nomeCategoria %>
                                                    </td>
													<td>
														<!--<p style="max-width: 25ch;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;"> <%= categoria.detalhesCategoria %></p>
                                                       -->	
													   <%= categoria.detalhesCategoria %>
                                                    </td>
													<td>
                                                        <%= categoria.data_Criacao %>
                                                    </td>
                                                    
                                                    <td>
                                                        <div class="btn-group btn-group-sm">
                                                            <button type="button" class="btn btn-info dropdown-toggle"
                                                                data-bs-toggle="dropdown" aria-haspopup="true"
                                                                aria-expanded="false">
                                                                Info
                                                            </button>
                                                            <div class="dropdown-menu">
                                                                <a class="dropdown-item" href="#">Ver</a>
                                                                <div class="dropdown-divider"></div>
                                                                <a class="dropdown-item" href="#"onclick="confirmar( `<%= categoria.idCategoria %>`)">Eliminar</a>
                                                           
                                                                 
                                                                
                                                            </div>
                                                        </div>
                                                    </td>

                                                </tr>
                                                <%}) %>
										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>

				</div>
			</main>
			<div class="modal fade" id="sizedModalLg" tabindex="-1" role="dialog"
					aria-hidden="true">
					<div class="modal-dialog modal-lg" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title">Categoria</h5>
								<button type="button" class="btn-close" data-bs-dismiss="modal"
									aria-label="Close"></button>
							</div>
							<div class="modal-body m-3">
								<div class="card-body">
									<form method="post" action="/NovaCategoriaProdutos" enctype="multipart/form-data">
										<div class="row">
											<div class="mb-3 col-md-6">
												<label class="form-label"
													for="inputNome">Nome*</label>
												<input type="text" class="form-control"
													id="inputNome" placeholder="Nome" name="nomeCategoria">
											</div>
											<div class="mb-3 col-md-6">
												<label class="form-label"
													for="file">IMG*</label>
												<input type="file" class="form-control"
													id="file" placeholder="Email" name="image">
											</div>
										</div>
										<div class="row">
										<div class="mb-3 col-md-12">
											<label class="form-label"
												for="inputAddress">informações*</label>
												<textarea name="detalhesCategoria" id="" cols="30" rows="10" class="form-control"></textarea>
											
										</div>
										
									</div>
										
										<button type="submit"
											class="btn btn-primary">Registar Categoria</button>
									</form>
								</div>

							</div>
						   
						</div>
					</div>
					
				</div>

				<%- include('../Partes/footer')  %> 
		</div>
	</div>

	<script src="/Dash/js/app.js"></script>
	<script src="/sweetalert/sweetalert2.all.min.js"></script>

	<script>
		document.addEventListener("DOMContentLoaded", function() {
			// Datatables with Buttons
			var datatablesButtons = $("#datatables-buttons").DataTable({
				responsive: true,
				lengthChange: !1,
				buttons: ["copy", "print"]
			});
			datatablesButtons.buttons().container().appendTo("#datatables-buttons_wrapper .col-md-6:eq(0)");
		});
	</script>
	  <script>
		function confirmar(id){
		  
	  Swal.fire({
		title: 'Queres Deletar Este Usuario ?',
	  icon:'warning',
		showCancelButton: true,
		confirmButtonColor:'#3085d6',
		cancelButtonColor:'#d33',
		confirmButtonText: 'Confirmar',
	  
	  }).then((result) => {
		/* Read more about isConfirmed, isDenied below   */
		if (result.isConfirmed) {
	  
		 window.location = '/DeletarCategoria/'+id;
		} else if (result.isDenied) {
		  Swal.fire('Erro ao eliminar', '', 'info')
		}
	  })
		}
		</script>
		 <% if(errado.length >0) {%>
			<script>
		var Toast = Swal.mixin({
	  toast: true,
	  position: 'top-end',
	  showConfirmButton: false,
	  timer: 3000,
	  timerProgressBar: true,
	  didOpen: (toast) => {
		toast.addEventListener('mouseenter', Swal.stopTimer)
		toast.addEventListener('mouseleave', Swal.resumeTimer)
	  }
	  })
	  Toast.fire({
	  icon: 'error',
	  title: '<%=errado %>'
	  })
			</script>
		   
			<% }else if(certo.length >0) {%>
			  <script>
		
	  const Toast = Swal.mixin({
	  toast: true,
	  position: 'top-end',
	  showConfirmButton: false,
	  timer: 3000,
	  timerProgressBar: true,
	  didOpen: (toast) => {
		toast.addEventListener('mouseenter', Swal.stopTimer)
		toast.addEventListener('mouseleave', Swal.resumeTimer)
	  }
	  })
	  
	  Toast.fire({
	  icon: 'success',
	  title: `<%= certo %>`
	  })
				
			  </script>
			  <% }%>
</body>


<!-- Mirrored from appstack.bootlab.io/tables-datatables-buttons.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 22 Nov 2022 19:15:38 GMT -->
</html>